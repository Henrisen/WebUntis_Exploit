import webuntis, base64, datetime, json

today = datetime.date.today()
pw = base64.b64decode(b'You Password in Base64') # Enter your base64 encoded password here
#print(pw)

with webuntis.Session(
    server='######.webuntis.com', # Your schools untis server
    username='max.musterman', # Your username
    password=pw,
    school='#############', # Your schools id
    useragent='WebUntis Test'
).login() as s:
  forename = input("Forename: ")
  if not forename: lastname = input('Lastname: ')
  students = []
  persons = []
  for student in s.students():
    persons.append(student.full_name)
  for teacher in s.teachers():
    persons.append(teacher.full_name.split(', ')[-1] + ' ' + teacher.full_name.split(', ')[0])
  for student in persons:
    #print(student.full_name)
    if forename:
      if forename.lower() == student.split(' ')[0].lower(): students.append(student)
    if not forename:
      if lastname.lower() == student.split(' ')[-1].lower(): students.append(student)
  if forename: print('There are',len(students),forename)
  if not forename: print('There are',len(students),lastname)
  for s in students:
    print(s)
